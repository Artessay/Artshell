\doxysection{Process\+Manager.\+h}
\label{_process_manager_8h_source}\index{inc/ProcessManager.h@{inc/ProcessManager.h}}
\textbf{ 浏览该文件的文档.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#ifndef \_PROCESS\_MANAGER\_H\_}}
\DoxyCodeLine{00013 \textcolor{preprocessor}{\#define \_PROCESS\_MANAGER\_H\_}}
\DoxyCodeLine{00014 }
\DoxyCodeLine{00015 \textcolor{preprocessor}{\#include "{}Heap.h"{}}}
\DoxyCodeLine{00016 \textcolor{preprocessor}{\#include "{}config.h"{}}}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018 \textcolor{preprocessor}{\#include <set>}}
\DoxyCodeLine{00019 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021 \textcolor{comment}{// 置于config.h头文件中，加快编译速度}}
\DoxyCodeLine{00022 \textcolor{comment}{// enum job\_state                                  // 进程状态}}
\DoxyCodeLine{00023 \textcolor{comment}{// \{}}
\DoxyCodeLine{00024 \textcolor{comment}{//     Running,                                    // 正在运行}}
\DoxyCodeLine{00025 \textcolor{comment}{//     Stopped,                                    // 停止运行}}
\DoxyCodeLine{00026 \textcolor{comment}{//     Done,                                       // 完成运行}}
\DoxyCodeLine{00027 \textcolor{comment}{//     Terminated                                  // 终止运行}}
\DoxyCodeLine{00028 \textcolor{comment}{// \};}}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030 \textcolor{keyword}{class }job\_unit}
\DoxyCodeLine{00031 \{}
\DoxyCodeLine{00032     \textcolor{keyword}{public}:}
\DoxyCodeLine{00033         job\_unit(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \_id, \textcolor{keywordtype}{int} \_pid, job\_state \_state, \textcolor{keywordtype}{int} \_argc, \textcolor{keywordtype}{char} * \_argv[]);}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035         \textcolor{comment}{// \string~job\_unit();}}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037         \textcolor{keywordtype}{void} PrintJob(\textcolor{keywordtype}{int} output\_fd = STDOUT\_FILENO);}
\DoxyCodeLine{00038         }
\DoxyCodeLine{00039         \textcolor{comment}{/* 为了使用集合，我们需要重载job unit的大小比较运算符 */}}
\DoxyCodeLine{00040         \textcolor{keywordtype}{bool} operator== ( \textcolor{keyword}{const} job\_unit\& rhs )\textcolor{keyword}{ const}}
\DoxyCodeLine{00041 \textcolor{keyword}{        }\{}
\DoxyCodeLine{00042             \textcolor{keywordflow}{return} \textcolor{keywordtype}{id} == rhs.id;}
\DoxyCodeLine{00043         \}}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045         \textcolor{keywordtype}{bool} operator!= ( \textcolor{keyword}{const} job\_unit\& rhs )\textcolor{keyword}{ const}}
\DoxyCodeLine{00046 \textcolor{keyword}{        }\{}
\DoxyCodeLine{00047             \textcolor{keywordflow}{return} !(*\textcolor{keyword}{this} == rhs);}
\DoxyCodeLine{00048         \}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050         \textcolor{keywordtype}{bool} operator< ( \textcolor{keyword}{const} job\_unit\& rhs )\textcolor{keyword}{ const}}
\DoxyCodeLine{00051 \textcolor{keyword}{        }\{}
\DoxyCodeLine{00052             \textcolor{keywordflow}{return} \textcolor{keywordtype}{id} < rhs.id;}
\DoxyCodeLine{00053         \}}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055         \textcolor{keywordtype}{bool} operator> ( \textcolor{keyword}{const} job\_unit\& rhs )\textcolor{keyword}{ const}}
\DoxyCodeLine{00056 \textcolor{keyword}{        }\{}
\DoxyCodeLine{00057             \textcolor{keywordflow}{return} rhs < *\textcolor{keyword}{this};}
\DoxyCodeLine{00058         \}}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060         \textcolor{keywordtype}{bool} operator<= ( \textcolor{keyword}{const} job\_unit\& rhs )\textcolor{keyword}{ const}}
\DoxyCodeLine{00061 \textcolor{keyword}{        }\{}
\DoxyCodeLine{00062             \textcolor{keywordflow}{return} !(rhs < *\textcolor{keyword}{this});}
\DoxyCodeLine{00063         \}}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065         \textcolor{keywordtype}{bool} operator>= ( \textcolor{keyword}{const} job\_unit\& rhs )\textcolor{keyword}{ const}}
\DoxyCodeLine{00066 \textcolor{keyword}{        }\{}
\DoxyCodeLine{00067             \textcolor{keywordflow}{return} !(*\textcolor{keyword}{this} < rhs);}
\DoxyCodeLine{00068         \}}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070     \textcolor{comment}{// private:}}
\DoxyCodeLine{00071         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} id;                            \textcolor{comment}{// 进程列表id}}
\DoxyCodeLine{00072         pid\_t pid;                                  \textcolor{comment}{// 进程列表pid}}
\DoxyCodeLine{00073         job\_state state;                            \textcolor{comment}{// 进程列表状态}}
\DoxyCodeLine{00074         \textcolor{keywordtype}{int} argc;                                   \textcolor{comment}{// 进程列表参数}}
\DoxyCodeLine{00075         \textcolor{keywordtype}{char} argv[MAX\_ARGUMENT\_NUMBER][BUFFER\_SIZE];\textcolor{comment}{// 进程列表参数}}
\DoxyCodeLine{00076 \};}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078 \textcolor{keyword}{class }ProcessManager}
\DoxyCodeLine{00079 \{}
\DoxyCodeLine{00080     \textcolor{keyword}{private}:}
\DoxyCodeLine{00081         \textcolor{comment}{// 进程控制}}
\DoxyCodeLine{00082         Heap<unsigned int> *job\_heap;                   \textcolor{comment}{// 工作id分配堆}}
\DoxyCodeLine{00083         std::set<class job\_unit> jobs;                 \textcolor{comment}{// 进程列表，采用STL红黑树实现}}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085     \textcolor{keyword}{public}:}
\DoxyCodeLine{00086         ProcessManager(\textcolor{comment}{/* args */});}
\DoxyCodeLine{00087         \textcolor{keyword}{virtual} \string~ProcessManager();}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089         \textcolor{keywordtype}{void} PrintJobList(\textcolor{keywordtype}{int} output\_fd = STDOUT\_FILENO) \textcolor{keyword}{const}; \textcolor{comment}{// 打印进程列表}}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091         \textcolor{keywordtype}{void} PrintJobListDone(\textcolor{keywordtype}{int} output\_fd = STDOUT\_FILENO); \textcolor{comment}{// 打印已完成的进程列表}}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00106         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} JobInsert(\textcolor{keywordtype}{int} pid, job\_state state, \textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[]);}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00117         \textcolor{keywordtype}{void} JobRemove(job\_unit * job);}
\DoxyCodeLine{00118         \textcolor{keywordtype}{void} JobRemove(std::set<job\_unit>::iterator\& job);}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120         \textcolor{keywordtype}{int} ForeGround(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} jobid);}
\DoxyCodeLine{00121         \textcolor{keywordtype}{int} BackGround(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} jobid);}
\DoxyCodeLine{00122 \};}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
